<!-- # 进入 frontend 目录
# 在命令行里切换到你的 frontend/ 文件夹：

# cd E:/vscode_project/py_stu_code/my_voice_assistant/frontend
# 启动 Python 自带的简易 HTTP 服务器

# 如果你用的是 Python 3.x：

# python -m http.server 8000 -->

<!-- 访问 -->
<!-- http://localhost:8000/index.html -->


<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Live2D Desktop Pet</title>
  <style>
    html, body {
      margin: 0; padding: 0;
      width: 100%; height: 100%;
      background: transparent; overflow: hidden;
    }
    canvas {
      position: absolute; top: 0; left: 0;
    }
  </style>
</head>
<body>
  <!-- PixiJS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/6.5.8/browser/pixi.min.js"></script>
  <!-- Cubism4 核心库 -->
  <script src="https://cubism.live2d.com/sdk-web/cubismcore/live2dcubismcore.min.js"></script>
  <!-- pixi-live2d-display 的 Cubism4 构建 -->
  <script src="https://cdn.jsdelivr.net/npm/pixi-live2d-display/dist/cubism4.min.js"></script>

  <script>
    console.log('PIXI.live2d:', PIXI.live2d);
    const { Live2DModel } = PIXI.live2d;

    const app = new PIXI.Application({ transparent: true, width: 512, height: 768 });
    document.body.appendChild(app.view);

    Live2DModel.from('model/whitecatfree_vts/sdwhite cat free.model3.json')
      .then(model => {
        model.anchor.set(0.5, 1.0);
        model.scale.set(0.2);
        model.x = app.screen.width / 2;
        model.y = app.screen.height;
        app.stage.addChild(model);

        // 拖拽实现（兼容官方插件）
        let dragging = false;
        let offset = { x: 0, y: 0 };

        model.interactive = true;

        model.on('pointerdown', e => {
          dragging = true;
          const pos = e.data.getLocalPosition(model.parent);
          offset.x = model.x - pos.x;
          offset.y = model.y - pos.y;
        });

        model.on('pointermove', e => {
          if (dragging) {
            const pos = e.data.getLocalPosition(model.parent);
            model.x = pos.x + offset.x;
            model.y = pos.y + offset.y;
          }
        });

        model.on('pointerup', () => { dragging = false; });
        model.on('pointerupoutside', () => { dragging = false; });

        console.log('模型加载完成');
      })
      .catch(err => console.error('模型加载失败:', err));
  </script>
</body>
</html>

